<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Various Parlor Tricks in `{peacesciencer}` • peacesciencer</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Various Parlor Tricks in `{peacesciencer}`">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peacesciencer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">What’s Included?</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/coerce-dispute-year-dyad-year.html">How `{peacesciencer}` Coerces Dispute-Year Data into Dyad-Year Data</a></li>
    <li><a class="dropdown-item" href="../articles/democracy.html">Fixing Unnecessary Missingness in Democracy Scores in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/different-data-types.html">Create Different Kinds of Data in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/joins.html">A Discussion of Various Joins in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/parlor-tricks.html">Various Parlor Tricks in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/state-systems.html">A Discussion of the Two State Systems (CoW, G-W) in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/versions.html">`{peacesciencer}` Data Versions</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-manuscript" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Manuscript</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-manuscript">
<li><a class="dropdown-item" href="../ms.html">HTML</a></li>
    <li><a class="dropdown-item" href="../ms.pdf">PDF</a></li>
    <li><a class="dropdown-item" href="../appendix.pdf">Appendix (PDF)</a></li>
    <li><a class="dropdown-item" href="../memo.pdf">(Peer Review) Memo (PDF)</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/svmiller/peacesciencer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Various Parlor Tricks in `{peacesciencer}`</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/svmiller/peacesciencer/blob/HEAD/vignettes/parlor-tricks.Rmd" class="external-link"><code>vignettes/parlor-tricks.Rmd</code></a></small>
      <div class="d-none name"><code>parlor-tricks.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a></span><span class="op">)</span></span></code></pre></div>
<p>This is a running list of various parlor tricks that you can do with
the data and functions in <a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a>. Space and time
considerations, along with some rigidity imposed by CRAN guidelines,
preclude me from including these as outright functions or belaboring
them in greater detail in the manuscript. Again,
<a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a> can do a lot, but it can’t do everything.
Yet, some of its functionality may not also be obvious from the
manuscript or documentation files because they’re not necessarily core
functions. Thus “parlor trick” is an appropriate descriptor here.</p>
<div class="section level2">
<h2 id="create-a-new-state-variable">Create a “New State” Variable<a class="anchor" aria-label="anchor" href="#create-a-new-state-variable"></a>
</h2>
<p>The manuscript includes a partial replication of a state-year civil
conflict analysis analogous to <a href="https://www.jstor.org/stable/3118222" class="external-link">Fearon and Laitin (2003)</a>
and <a href="http://jpr.sagepub.com/content/51/5/634" class="external-link">Gibler and Miller
(2014)</a>. Both of those analyses include a “new state” variable,
arguing that states within the first two years of their existence are
more likely to experience a civil war onset. The partial replication
does not include this. This is because the easiest way to create this
variable is through a <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> mutate based on the row
number of the group, but <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by()</a></code> has the unfortunate
side effect of erasing any other attributes in the data (i.e. the
<code>ps_system</code> and <code>ps_type</code> attributes). This would
break the <a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a> pipe. If you want this variable,
I recommend creating and merging this variable after creating the bulk
of the data.</p>
<p>Here’s how you’d do it.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Hypothetical main data</span></span>
<span><span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">year</span>, <span class="fl">1946</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_ucdp_acd.html">add_ucdp_acd</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intrastate"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Data</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span></span>
<span><span class="co"># Add in new state variable after the fact</span></span>
<span><span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>newstate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">Data</span>, <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">:</span><span class="va">ucdponset</span>, <span class="va">newstate</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Data</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, statename, year)`</span></span>
<span></span>
<span><span class="co"># Proof of concept: Here's India</span></span>
<span><span class="va">Data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">750</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 73 × 9</span></span></span>
<span><span class="co">#&gt;    gwcode statename  year ucdpongoing ucdponset newstate maxintensity</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    750 India      <span style="text-decoration: underline;">1</span>947           0         0        1           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    750 India      <span style="text-decoration: underline;">1</span>948           1         1        1            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    750 India      <span style="text-decoration: underline;">1</span>949           1         0        0            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    750 India      <span style="text-decoration: underline;">1</span>950           1         0        0            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    750 India      <span style="text-decoration: underline;">1</span>951           1         0        0            2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    750 India      <span style="text-decoration: underline;">1</span>952           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    750 India      <span style="text-decoration: underline;">1</span>953           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    750 India      <span style="text-decoration: underline;">1</span>954           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    750 India      <span style="text-decoration: underline;">1</span>955           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    750 India      <span style="text-decoration: underline;">1</span>956           1         1        0            1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 63 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: conflict_ids &lt;chr&gt;, ucdpspell &lt;dbl&gt;</span></span></span>
<span></span>
<span><span class="co"># And here's Belize</span></span>
<span><span class="va">Data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">80</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 39 × 9</span></span></span>
<span><span class="co">#&gt;    gwcode statename  year ucdpongoing ucdponset newstate maxintensity</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     80 Belize     <span style="text-decoration: underline;">1</span>981           0         0        1           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     80 Belize     <span style="text-decoration: underline;">1</span>982           0         0        1           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     80 Belize     <span style="text-decoration: underline;">1</span>983           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     80 Belize     <span style="text-decoration: underline;">1</span>984           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     80 Belize     <span style="text-decoration: underline;">1</span>985           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     80 Belize     <span style="text-decoration: underline;">1</span>986           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     80 Belize     <span style="text-decoration: underline;">1</span>987           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     80 Belize     <span style="text-decoration: underline;">1</span>988           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     80 Belize     <span style="text-decoration: underline;">1</span>989           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     80 Belize     <span style="text-decoration: underline;">1</span>990           0         0        0           <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 29 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: conflict_ids &lt;chr&gt;, ucdpspell &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-capabilitiesdevelopmentmilitarization-as-bremer-1992-did">Code Capabilities/Development/Militarization as Bremer (1992)
Did<a class="anchor" aria-label="anchor" href="#code-capabilitiesdevelopmentmilitarization-as-bremer-1992-did"></a>
</h2>
<p>The manuscript includes a replication of <a href="https://journals.sagepub.com/doi/abs/10.1177/0022002792036002005" class="external-link">Bremer’s
(1992) “dangerous dyads”</a> design, albeit one that leverages
newer/better data sources that were unavailable to Bremer at the time.
For convenience’s sake, the replication used other approaches to
estimating Bremer’s variables, including the “weak-link” mechanisms that
<a href="https://www.jstor.org/stable/2944879" class="external-link">Dixon (1994)</a>
introduced in his seminal work on democratic conflict resolution. If the
user wanted to recreate some of the covariates as Bremer (1992) did it,
here would be how to do it.</p>
<p>The covariates in question concern information grabbed from the
Correlates of War national material capabilities data set.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Bremer has a different way of coding democracy
(i.e. using a value of 5 or greater on the democracy scale in Polity),
but this is so far removed from current practice that it’s inadvisable
to replicate. If you want to use the Polity data (using
&lt;code&gt;&lt;a href="../reference/add_democracy.html"&gt;add_democracy()&lt;/a&gt;&lt;/code&gt; in this package), use the
&lt;code&gt;polity2&lt;/code&gt; variable that adds the autocracy and democracy
indices together. Therein, use the weak-link specification &lt;em&gt;and&lt;/em&gt;
the distance between the more democratic and less democratic state.&lt;/p&gt;'><sup>1</sup></a> For example, the user
guide recreates the “relative power” variable as a proportion of the
lower composite index of national capabilities (CINC) variable over the
higher one. Bremer opts for a different approach, defining a “relative
power” variable as a three-part ordinal category where the more powerful
side has a CINC score that is 1) 10 times higher than the less powerful
side, 2) three times higher than the other side, or 3) less than three
times higher than the other side. Here is the exact passage on
p. 322.</p>
<blockquote>
<p>Based on these CINC scores, I computed the larger-to-smaller
capability ratios for all dyad-years and classified them into three
groups. If the capability ratio was less than or equal to three, then
the dyad was considered to constitute a case of small power difference.
If the ratio was larger than 10, then the power difference was coded as
large, whereas a ratio between 3 and 10 was coded as a medium power
difference. If either of the CINC scores was missing (or equal to zero)
for a ratio calculation, then the power difference score for that dyad
was coded as missing also.</p>
</blockquote>
<p>This is an easy <code><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when()</a></code> function, but it also
would’ve consumed space and words in a manuscript than the allocated
journal space would allow. There’s added difficulty in making sure to
identify which side in a non-directed dyad-year is more powerful.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cow_ddy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># built-in data set for convenience</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ccode2</span> <span class="op">&gt;</span> <span class="va">ccode1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># make it non-directed</span></span>
<span>  <span class="co"># add CINC scores</span></span>
<span>  <span class="fu"><a href="../reference/add_nmc.html">add_nmc</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># select just what we want</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">cinc1</span>, <span class="va">cinc2</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span></span>
<span></span>
<span><span class="va">Bremer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># create a three-item ordinal relative power category with values 2, 1, and 0</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>relpow <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>    <span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc1</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc2</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>    <span class="co"># copy-paste, re-arrange</span></span>
<span>    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&lt;</span> <span class="fl">10</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span><span class="op">)</span><span class="op">~</span> <span class="fl">1</span>,</span>
<span>    <span class="op">(</span><span class="va">cinc2</span> <span class="op">&gt;</span> <span class="va">cinc1</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">cinc2</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">*</span><span class="va">cinc1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">0</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_real_</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">relpow_example</span></span>
<span></span>
<span><span class="co"># Let's inspect the output.</span></span>
<span><span class="va">relpow_example</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">na.omit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>whichside <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">cinc1</span> <span class="op">&gt;</span> <span class="va">cinc2</span>, <span class="st">"ccode1 &gt; ccode2"</span>, </span>
<span>                            <span class="st">"ccode2 &gt;= ccode1"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">whichside</span>, <span class="va">relpow</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;list_of&lt;</span></span>
<span><span class="co">#&gt;   tbl_df&lt;</span></span>
<span><span class="co">#&gt;     ccode1   : double</span></span>
<span><span class="co">#&gt;     ccode2   : double</span></span>
<span><span class="co">#&gt;     year     : double</span></span>
<span><span class="co">#&gt;     cinc1    : double</span></span>
<span><span class="co">#&gt;     cinc2    : double</span></span>
<span><span class="co">#&gt;     relpow   : double</span></span>
<span><span class="co">#&gt;     whichside: character</span></span>
<span><span class="co">#&gt;   &gt;</span></span>
<span><span class="co">#&gt; &gt;[6]&gt;</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 132,639 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year cinc1 cinc2 relpow whichside      </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2    200  <span style="text-decoration: underline;">1</span>892 0.173 0.173      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2    200  <span style="text-decoration: underline;">1</span>897 0.169 0.166      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2    200  <span style="text-decoration: underline;">1</span>898 0.197 0.157      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2    200  <span style="text-decoration: underline;">1</span>899 0.185 0.169      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2    200  <span style="text-decoration: underline;">1</span>900 0.188 0.178      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2    200  <span style="text-decoration: underline;">1</span>901 0.203 0.174      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2    200  <span style="text-decoration: underline;">1</span>902 0.208 0.161      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2    200  <span style="text-decoration: underline;">1</span>903 0.210 0.143      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2    200  <span style="text-decoration: underline;">1</span>904 0.205 0.135      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2    200  <span style="text-decoration: underline;">1</span>905 0.214 0.121      0 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 132,629 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 114,225 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year  cinc1   cinc2 relpow whichside      </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     70  <span style="text-decoration: underline;">1</span>831 0.042<span style="text-decoration: underline;">0</span> 0.009<span style="text-decoration: underline;">45</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     70  <span style="text-decoration: underline;">1</span>832 0.044<span style="text-decoration: underline;">5</span> 0.009<span style="text-decoration: underline;">63</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     70  <span style="text-decoration: underline;">1</span>833 0.048<span style="text-decoration: underline;">1</span> 0.009<span style="text-decoration: underline;">58</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     70  <span style="text-decoration: underline;">1</span>834 0.047<span style="text-decoration: underline;">8</span> 0.009<span style="text-decoration: underline;">71</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     70  <span style="text-decoration: underline;">1</span>835 0.048<span style="text-decoration: underline;">5</span> 0.009<span style="text-decoration: underline;">80</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     70  <span style="text-decoration: underline;">1</span>836 0.051<span style="text-decoration: underline;">0</span> 0.009<span style="text-decoration: underline;">41</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     70  <span style="text-decoration: underline;">1</span>837 0.053<span style="text-decoration: underline;">5</span> 0.009<span style="text-decoration: underline;">75</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     70  <span style="text-decoration: underline;">1</span>838 0.053<span style="text-decoration: underline;">3</span> 0.009<span style="text-decoration: underline;">66</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     70  <span style="text-decoration: underline;">1</span>839 0.050<span style="text-decoration: underline;">8</span> 0.009<span style="text-decoration: underline;">48</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     70  <span style="text-decoration: underline;">1</span>840 0.049<span style="text-decoration: underline;">5</span> 0.008<span style="text-decoration: underline;">98</span>      1 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 114,215 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 198,867 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year cinc1   cinc2 relpow whichside      </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>920 0.290 0.010<span style="text-decoration: underline;">1</span>       2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>921 0.253 0.010<span style="text-decoration: underline;">5</span>       2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>922 0.256 0.008<span style="text-decoration: underline;">41</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>923 0.272 0.009<span style="text-decoration: underline;">86</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>924 0.254 0.008<span style="text-decoration: underline;">89</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>925 0.254 0.008<span style="text-decoration: underline;">70</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>926 0.263 0.009<span style="text-decoration: underline;">24</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>927 0.239 0.009<span style="text-decoration: underline;">37</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>928 0.240 0.009<span style="text-decoration: underline;">70</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>929 0.240 0.009<span style="text-decoration: underline;">80</span>      2 ccode1 &gt; ccode2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 198,857 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[4]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 141,100 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year  cinc1 cinc2 relpow whichside       </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2    200  <span style="text-decoration: underline;">1</span>861 0.144  0.258      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2    200  <span style="text-decoration: underline;">1</span>862 0.176  0.251      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2    200  <span style="text-decoration: underline;">1</span>863 0.179  0.251      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2    200  <span style="text-decoration: underline;">1</span>864 0.193  0.243      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2    200  <span style="text-decoration: underline;">1</span>865 0.135  0.256      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2    200  <span style="text-decoration: underline;">1</span>866 0.098<span style="text-decoration: underline;">2</span> 0.248      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2    200  <span style="text-decoration: underline;">1</span>867 0.114  0.253      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2    200  <span style="text-decoration: underline;">1</span>868 0.107  0.253      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2    200  <span style="text-decoration: underline;">1</span>869 0.108  0.246      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2    200  <span style="text-decoration: underline;">1</span>870 0.099<span style="text-decoration: underline;">0</span> 0.242      0 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 141,090 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[5]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 133,564 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year  cinc1 cinc2 relpow whichside       </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2    200  <span style="text-decoration: underline;">1</span>816 0.039<span style="text-decoration: underline;">7</span> 0.337      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2    200  <span style="text-decoration: underline;">1</span>817 0.035<span style="text-decoration: underline;">8</span> 0.328      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2    200  <span style="text-decoration: underline;">1</span>818 0.036<span style="text-decoration: underline;">1</span> 0.329      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2    200  <span style="text-decoration: underline;">1</span>819 0.037<span style="text-decoration: underline;">1</span> 0.317      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2    200  <span style="text-decoration: underline;">1</span>820 0.037<span style="text-decoration: underline;">1</span> 0.317      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2    200  <span style="text-decoration: underline;">1</span>821 0.034<span style="text-decoration: underline;">2</span> 0.317      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2    200  <span style="text-decoration: underline;">1</span>822 0.032<span style="text-decoration: underline;">9</span> 0.311      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2    200  <span style="text-decoration: underline;">1</span>823 0.033<span style="text-decoration: underline;">1</span> 0.318      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2    200  <span style="text-decoration: underline;">1</span>824 0.033<span style="text-decoration: underline;">0</span> 0.330      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2    200  <span style="text-decoration: underline;">1</span>825 0.034<span style="text-decoration: underline;">2</span> 0.331      1 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 133,554 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[6]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 235,749 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year   cinc1  cinc2 relpow whichside       </span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     20    200  <span style="text-decoration: underline;">1</span>920 0.010<span style="text-decoration: underline;">1</span>  0.128       2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     20    200  <span style="text-decoration: underline;">1</span>922 0.008<span style="text-decoration: underline;">41</span> 0.094<span style="text-decoration: underline;">5</span>      2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     20    200  <span style="text-decoration: underline;">1</span>923 0.009<span style="text-decoration: underline;">86</span> 0.099<span style="text-decoration: underline;">0</span>      2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     20    200  <span style="text-decoration: underline;">1</span>924 0.008<span style="text-decoration: underline;">89</span> 0.107       2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     20    200  <span style="text-decoration: underline;">1</span>925 0.008<span style="text-decoration: underline;">70</span> 0.095<span style="text-decoration: underline;">6</span>      2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     20    200  <span style="text-decoration: underline;">1</span>939 0.009<span style="text-decoration: underline;">09</span> 0.099<span style="text-decoration: underline;">7</span>      2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     20    255  <span style="text-decoration: underline;">1</span>934 0.008<span style="text-decoration: underline;">91</span> 0.089<span style="text-decoration: underline;">1</span>      2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     20    255  <span style="text-decoration: underline;">1</span>935 0.008<span style="text-decoration: underline;">74</span> 0.103       2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     20    255  <span style="text-decoration: underline;">1</span>936 0.008<span style="text-decoration: underline;">65</span> 0.115       2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     20    255  <span style="text-decoration: underline;">1</span>937 0.008<span style="text-decoration: underline;">93</span> 0.118       2 ccode2 &gt;= ccode1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 235,739 more rows</span></span></span></code></pre></div>
<p>Next, the manuscript codes Bremer’s (1992) development/“advanced
economies” measure using the weak-link of the lower GDP per capita in
the dyad using <a href="https://academic.oup.com/isq/article-abstract/64/2/392/5824855" class="external-link">the
simulations from Anders et al. (2020)</a>. In my defense, this is
exactly the kind of data Bremer wishes he had available to him. He says
so himself on footnote 26 on page 324.</p>
<blockquote>
<p>Under the most optimistic assumptions about data availability, I
would estimate that the number of dyad-years for which the relevant data
[GNP or GDP per capita] could be assembled would be less than 20% of the
total dyad-years under consideration. A more realistic estimate might be
as low as 10%. Clearly, our ability to test a generalization when 80% to
90% of the needed data are missing is very limited, and especially so in
this case, because the missing data would be concentrated heavily in the
pre-World War II era and less advanced states.</p>
</blockquote>
<p>Given this limitation, Bremer uses this approach to coding the
development/“advanced economies” measure.</p>
<blockquote>
<p>A more economically advanced state should be characterized by
possessing a share of system-wide economic capability that is greater
than its share of system-wide demographic capability. Hence, in years
when this was found to be true, I classified a state as more advanced;
otherwise, less advanced. The next step involved examining each pair of
states in each year and assigning it to one of three groups: both more
advanced (7,160 dyad-years), one more advanced (61,823 dyad-years), and
both less advanced (128,939 dyad-years).</p>
</blockquote>
<p>Replicating this approach is going to require group-by summaries of
the raw national material capabilities data, which is outside of
<a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a>’s core functionality. Bremer’s wording here
is a little vague; he doesn’t explain what variable, or variables,
comprise “economic capability” and “demographic capability.” Let’s
assume that “demographic capability” is just the total population
variable whereas the “economic capability” variable<em>s</em> include
iron and steel production and primary energy consumption. The variable
would look something like this.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cow_nmc</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># calculate year proportions</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>prop_tpop <span class="op">=</span> <span class="va">tpop</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tpop</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>         prop_irst <span class="op">=</span> <span class="va">irst</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">irst</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>         prop_pec <span class="op">=</span> <span class="va">pec</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">pec</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># standardize an "economic capability" measure</span></span>
<span>  <span class="co"># then make an advanced dummy</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>econcap <span class="op">=</span> <span class="op">(</span><span class="va">prop_irst</span> <span class="op">+</span> <span class="va">prop_pec</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>         advanced <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">econcap</span> <span class="op">&gt;</span> <span class="va">prop_tpop</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">prop_tpop</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Advanced</span></span>
<span></span>
<span><span class="va">Advanced</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15,951 × 7</span></span></span>
<span><span class="co">#&gt;    ccode  year prop_tpop prop_irst prop_pec econcap advanced</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     2  <span style="text-decoration: underline;">1</span>816    0.039<span style="text-decoration: underline;">8</span>    0.095<span style="text-decoration: underline;">4</span>  0.009<span style="text-decoration: underline;">66</span>  0.052<span style="text-decoration: underline;">5</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2  <span style="text-decoration: underline;">1</span>817    0.040<span style="text-decoration: underline;">4</span>    0.093<span style="text-decoration: underline;">8</span>  0.010<span style="text-decoration: underline;">3</span>   0.052<span style="text-decoration: underline;">0</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     2  <span style="text-decoration: underline;">1</span>818    0.041<span style="text-decoration: underline;">1</span>    0.102   0.011<span style="text-decoration: underline;">0</span>   0.056<span style="text-decoration: underline;">4</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     2  <span style="text-decoration: underline;">1</span>819    0.041<span style="text-decoration: underline;">6</span>    0.101   0.010<span style="text-decoration: underline;">4</span>   0.055<span style="text-decoration: underline;">5</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     2  <span style="text-decoration: underline;">1</span>820    0.042<span style="text-decoration: underline;">2</span>    0.113   0.010<span style="text-decoration: underline;">5</span>   0.061<span style="text-decoration: underline;">7</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2  <span style="text-decoration: underline;">1</span>821    0.043<span style="text-decoration: underline;">0</span>    0.092<span style="text-decoration: underline;">7</span>  0.010<span style="text-decoration: underline;">8</span>   0.051<span style="text-decoration: underline;">8</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     2  <span style="text-decoration: underline;">1</span>822    0.043<span style="text-decoration: underline;">1</span>    0.095<span style="text-decoration: underline;">0</span>  0.010<span style="text-decoration: underline;">9</span>   0.053<span style="text-decoration: underline;">0</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     2  <span style="text-decoration: underline;">1</span>823    0.043<span style="text-decoration: underline;">9</span>    0.093<span style="text-decoration: underline;">3</span>  0.011<span style="text-decoration: underline;">1</span>   0.052<span style="text-decoration: underline;">2</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     2  <span style="text-decoration: underline;">1</span>824    0.044<span style="text-decoration: underline;">7</span>    0.086<span style="text-decoration: underline;">1</span>  0.012<span style="text-decoration: underline;">2</span>   0.049<span style="text-decoration: underline;">1</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     2  <span style="text-decoration: underline;">1</span>825    0.045<span style="text-decoration: underline;">3</span>    0.089<span style="text-decoration: underline;">1</span>  0.012<span style="text-decoration: underline;">9</span>   0.051<span style="text-decoration: underline;">0</span>        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15,941 more rows</span></span></span></code></pre></div>
<p>Now, let’s merge this into the <code>Bremer</code> data frame we
created. I’ll make this an ordinal variable as well with the same 2, 1,
0 ordering scheme.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bremer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Advanced</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">advanced</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ccode1 <span class="op">=</span> <span class="va">ccode</span>, advanced1 <span class="op">=</span> <span class="va">advanced</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Advanced</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">advanced</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ccode2 <span class="op">=</span> <span class="va">ccode</span>, advanced2 <span class="op">=</span> <span class="va">advanced</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>advancedcat <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">advanced1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>    <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>    <span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">advanced2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode1, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode2, year)`</span></span>
<span></span>
<span><span class="co"># Let's inspect the output</span></span>
<span><span class="va">Bremer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="va">na.omit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">advancedcat</span><span class="op">)</span> </span>
<span><span class="co">#&gt; &lt;list_of&lt;</span></span>
<span><span class="co">#&gt;   tbl_df&lt;</span></span>
<span><span class="co">#&gt;     ccode1     : double</span></span>
<span><span class="co">#&gt;     ccode2     : double</span></span>
<span><span class="co">#&gt;     year       : double</span></span>
<span><span class="co">#&gt;     cinc1      : double</span></span>
<span><span class="co">#&gt;     cinc2      : double</span></span>
<span><span class="co">#&gt;     advanced1  : double</span></span>
<span><span class="co">#&gt;     advanced2  : double</span></span>
<span><span class="co">#&gt;     advancedcat: double</span></span>
<span><span class="co">#&gt;   &gt;</span></span>
<span><span class="co">#&gt; &gt;[3]&gt;</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 538,707 × 8</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year     cinc1   cinc2 advanced1 advanced2 advancedcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     31     40  <span style="text-decoration: underline;">1</span>986 0.000<span style="text-decoration: underline;">034</span>9 0.003<span style="text-decoration: underline;">26</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     31     40  <span style="text-decoration: underline;">1</span>987 0.000<span style="text-decoration: underline;">034</span>9 0.003<span style="text-decoration: underline;">28</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     31     40  <span style="text-decoration: underline;">1</span>988 0.000<span style="text-decoration: underline;">046</span>0 0.003<span style="text-decoration: underline;">34</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     31     40  <span style="text-decoration: underline;">1</span>989 0.000<span style="text-decoration: underline;">058</span>4 0.003<span style="text-decoration: underline;">35</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     31     40  <span style="text-decoration: underline;">1</span>990 0.000<span style="text-decoration: underline;">051</span>1 0.003<span style="text-decoration: underline;">25</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     31     40  <span style="text-decoration: underline;">1</span>991 0.000<span style="text-decoration: underline;">043</span>2 0.003<span style="text-decoration: underline;">30</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     31     40  <span style="text-decoration: underline;">1</span>992 0.000<span style="text-decoration: underline;">044</span>4 0.002<span style="text-decoration: underline;">71</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     31     40  <span style="text-decoration: underline;">1</span>993 0.000<span style="text-decoration: underline;">047</span>9 0.002<span style="text-decoration: underline;">65</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     31     40  <span style="text-decoration: underline;">1</span>994 0.000<span style="text-decoration: underline;">036</span>5 0.001<span style="text-decoration: underline;">98</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     31     40  <span style="text-decoration: underline;">1</span>995 0.000<span style="text-decoration: underline;">035</span>5 0.001<span style="text-decoration: underline;">61</span>         0         0           0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 538,697 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 344,483 × 8</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year cinc1     cinc2 advanced1 advanced2 advancedcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     31  <span style="text-decoration: underline;">1</span>986 0.135 0.000<span style="text-decoration: underline;">034</span>9         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     31  <span style="text-decoration: underline;">1</span>987 0.134 0.000<span style="text-decoration: underline;">034</span>9         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     31  <span style="text-decoration: underline;">1</span>988 0.134 0.000<span style="text-decoration: underline;">046</span>0         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     31  <span style="text-decoration: underline;">1</span>989 0.148 0.000<span style="text-decoration: underline;">058</span>4         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     31  <span style="text-decoration: underline;">1</span>990 0.141 0.000<span style="text-decoration: underline;">051</span>1         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     31  <span style="text-decoration: underline;">1</span>991 0.137 0.000<span style="text-decoration: underline;">043</span>2         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     31  <span style="text-decoration: underline;">1</span>992 0.148 0.000<span style="text-decoration: underline;">044</span>4         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     31  <span style="text-decoration: underline;">1</span>993 0.153 0.000<span style="text-decoration: underline;">047</span>9         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     31  <span style="text-decoration: underline;">1</span>994 0.146 0.000<span style="text-decoration: underline;">036</span>5         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     31  <span style="text-decoration: underline;">1</span>995 0.140 0.000<span style="text-decoration: underline;">035</span>5         1         0           1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 344,473 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54,945 × 8</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year cinc1   cinc2 advanced1 advanced2 advancedcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>920 0.290 0.010<span style="text-decoration: underline;">1</span>          1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>921 0.253 0.010<span style="text-decoration: underline;">5</span>          1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>922 0.256 0.008<span style="text-decoration: underline;">41</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>923 0.272 0.009<span style="text-decoration: underline;">86</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>924 0.254 0.008<span style="text-decoration: underline;">89</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>925 0.254 0.008<span style="text-decoration: underline;">70</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>926 0.263 0.009<span style="text-decoration: underline;">24</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>927 0.239 0.009<span style="text-decoration: underline;">37</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>928 0.240 0.009<span style="text-decoration: underline;">70</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>929 0.240 0.009<span style="text-decoration: underline;">80</span>         1         1           2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 54,935 more rows</span></span></span></code></pre></div>
<p>Finally, the manuscript creates a militarization measure that is a
weak-link that uses the data on military personnel and total population.
Bremer opts for an approach similar to the development indicator he
uses.</p>
<blockquote>
<p>Instead, I relied on the material capabilities data set discussed
above, and classified a state as more militarized if its share of
system-wide military capabilities was greater than its share of
system-wide demographic capabilities. I classified it less militarized
if this was not true. The classification of each dyad-year was then
based on whether both, one, or neither of the two states making up the
dyad were more militarized in that year.</p>
</blockquote>
<p>It reads like this is what he’s doing, while again reiterating that
I’m assuming he’s using just the total population variable to measure
“demographic capability.”</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cow_nmc</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># calculate year proportions</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>prop_tpop <span class="op">=</span> <span class="va">tpop</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">tpop</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>         prop_milex <span class="op">=</span> <span class="va">milex</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">milex</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>,</span>
<span>         prop_milper <span class="op">=</span> <span class="va">milper</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">milper</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># standardize a "military capability" measure</span></span>
<span>  <span class="co"># then make an advanced dummy</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>militcap <span class="op">=</span> <span class="op">(</span><span class="va">prop_milper</span> <span class="op">+</span> <span class="va">prop_milex</span><span class="op">)</span><span class="op">/</span><span class="fl">2</span>,</span>
<span>         militarized <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">militcap</span> <span class="op">&gt;</span> <span class="va">prop_tpop</span>, <span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">prop_tpop</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Militarized</span></span>
<span></span>
<span><span class="va">Militarized</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 15,951 × 7</span></span></span>
<span><span class="co">#&gt;    ccode  year prop_tpop prop_milex prop_milper militcap militarized</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>     2  <span style="text-decoration: underline;">1</span>816    0.039<span style="text-decoration: underline;">8</span>     0.068<span style="text-decoration: underline;">2</span>     0.008<span style="text-decoration: underline;">59</span>   0.038<span style="text-decoration: underline;">4</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>     2  <span style="text-decoration: underline;">1</span>817    0.040<span style="text-decoration: underline;">4</span>     0.045<span style="text-decoration: underline;">1</span>     0.008<span style="text-decoration: underline;">27</span>   0.026<span style="text-decoration: underline;">7</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>     2  <span style="text-decoration: underline;">1</span>818    0.041<span style="text-decoration: underline;">1</span>     0.037<span style="text-decoration: underline;">0</span>     0.008<span style="text-decoration: underline;">32</span>   0.022<span style="text-decoration: underline;">7</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>     2  <span style="text-decoration: underline;">1</span>819    0.041<span style="text-decoration: underline;">6</span>     0.044<span style="text-decoration: underline;">9</span>     0.007<span style="text-decoration: underline;">09</span>   0.026<span style="text-decoration: underline;">0</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>     2  <span style="text-decoration: underline;">1</span>820    0.042<span style="text-decoration: underline;">2</span>     0.031<span style="text-decoration: underline;">0</span>     0.007<span style="text-decoration: underline;">33</span>   0.019<span style="text-decoration: underline;">2</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>     2  <span style="text-decoration: underline;">1</span>821    0.043<span style="text-decoration: underline;">0</span>     0.034<span style="text-decoration: underline;">5</span>     0.004<span style="text-decoration: underline;">86</span>   0.019<span style="text-decoration: underline;">7</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>     2  <span style="text-decoration: underline;">1</span>822    0.043<span style="text-decoration: underline;">1</span>     0.024<span style="text-decoration: underline;">9</span>     0.004<span style="text-decoration: underline;">17</span>   0.014<span style="text-decoration: underline;">6</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>     2  <span style="text-decoration: underline;">1</span>823    0.043<span style="text-decoration: underline;">9</span>     0.024<span style="text-decoration: underline;">9</span>     0.005<span style="text-decoration: underline;">34</span>   0.015<span style="text-decoration: underline;">1</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>     2  <span style="text-decoration: underline;">1</span>824    0.044<span style="text-decoration: underline;">7</span>     0.029<span style="text-decoration: underline;">5</span>     0.004<span style="text-decoration: underline;">74</span>   0.017<span style="text-decoration: underline;">1</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>     2  <span style="text-decoration: underline;">1</span>825    0.045<span style="text-decoration: underline;">3</span>     0.032<span style="text-decoration: underline;">1</span>     0.005<span style="text-decoration: underline;">11</span>   0.018<span style="text-decoration: underline;">6</span>           0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15,941 more rows</span></span></span></code></pre></div>
<p>Let’s merge this into the <code>Bremer</code> data we created and
inspect the output.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Bremer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Militarized</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">militarized</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ccode1 <span class="op">=</span> <span class="va">ccode</span>, militarized1 <span class="op">=</span> <span class="va">militarized</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">Militarized</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode</span>, <span class="va">year</span>, <span class="va">militarized</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>              <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>ccode2 <span class="op">=</span> <span class="va">ccode</span>, militarized2 <span class="op">=</span> <span class="va">militarized</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>militcat <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">militarized1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="fl">2</span>,</span>
<span>    <span class="op">(</span><span class="va">militarized1</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|</span> </span>
<span>      <span class="op">(</span><span class="va">advanced1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>    <span class="va">militarized1</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">&amp;</span> <span class="va">militarized2</span> <span class="op">==</span> <span class="fl">0</span> <span class="op">~</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">Bremer</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode1, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode2, year)`</span></span>
<span></span>
<span><span class="va">Bremer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">militarized1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="va">na.omit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">militcat</span><span class="op">)</span> </span>
<span><span class="co">#&gt; &lt;list_of&lt;</span></span>
<span><span class="co">#&gt;   tbl_df&lt;</span></span>
<span><span class="co">#&gt;     ccode1      : double</span></span>
<span><span class="co">#&gt;     ccode2      : double</span></span>
<span><span class="co">#&gt;     year        : double</span></span>
<span><span class="co">#&gt;     militarized1: double</span></span>
<span><span class="co">#&gt;     militarized2: double</span></span>
<span><span class="co">#&gt;     militcat    : double</span></span>
<span><span class="co">#&gt;   &gt;</span></span>
<span><span class="co">#&gt; &gt;[3]&gt;</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 303,368 × 6</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>923            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>925            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>926            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>927            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>928            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>929            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>930            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>931            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>932            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>933            0            0        0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 303,358 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 340,196 × 6</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>920            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>921            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>922            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>924            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>947            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>948            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>949            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>950            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>971            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>973            1            0        1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 340,186 more rows</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[3]]</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 112,758 × 6</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year militarized1 militarized2 militcat</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>942            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>943            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>944            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>945            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>946            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>951            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>952            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>953            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>954            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>955            1            1        2</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 112,748 more rows</span></span></span></code></pre></div>
<p>If we wanted to perfectly recreate the data as Bremer (1992) did it
almost 30 years ago, here’s how you’d do it in
<a href="https://github.com/svmiller/peacesciencer/" class="external-link">peacesciencer</a> (albeit with newer data). Still, I think
the data innovations that have followed Bremer (1992) merit the approach
employed in the manuscript.</p>
</div>
<div class="section level2">
<h2 id="get-multiple-peace-years-in-one-fell-swoop">Get Multiple Peace Years in One Fell Swoop<a class="anchor" aria-label="anchor" href="#get-multiple-peace-years-in-one-fell-swoop"></a>
</h2>
<p><code><a href="../reference/add_peace_years.html">add_peace_years()</a></code> is designed to work generally, based
on the other data/functions included in the package. For example, assume
you wanted to a dyad-year analysis comparing the Correlates of War (CoW)
Militarized Interstate Dispute (MID) with the Gibler-Miller-Little
conflict data. Just add both in the pipe and ask for peace-years.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cow_ddy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># non-directed, politically relevant, for convenience</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ccode2</span> <span class="op">&gt;</span> <span class="va">ccode1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/filter_prd.html">filter_prd</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_cow_mids.html">add_cow_mids</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_gml_mids.html">add_gml_mids</a></span><span class="op">(</span>keep <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">NDY</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode1, ccode2, year)`</span></span>
<span><span class="co">#&gt; add_cow_mids() IMPORTANT MESSAGE: By default, this function whittles</span></span>
<span><span class="co">#&gt; dispute-year data into dyad-year data by first selecting on unique onsets.</span></span>
<span><span class="co">#&gt; Thereafter, where duplicates remain, it whittles dispute-year data into</span></span>
<span><span class="co">#&gt; dyad-year data in the following order: 1) retaining highest `fatality`, 2)</span></span>
<span><span class="co">#&gt; retaining highest `hostlev`, 3) retaining highest estimated `mindur`, 4)</span></span>
<span><span class="co">#&gt; retaining highest estimated `maxdur`, 5) retaining reciprocated over</span></span>
<span><span class="co">#&gt; non-reciprocated observations, 6) retaining the observation with the lowest</span></span>
<span><span class="co">#&gt; start month, and, where duplicates still remained (and they don't), 7) forcibly</span></span>
<span><span class="co">#&gt; dropping all duplicates for observations that are otherwise very similar. See:</span></span>
<span><span class="co">#&gt; http://svmiller.com/peacesciencer/articles/coerce-dispute-year-dyad-year.html</span></span>
<span><span class="co">#&gt; Dyadic data are non-directed and initiation variables make no sense in this</span></span>
<span><span class="co">#&gt; context.</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode1, ccode2, year)`</span></span>
<span><span class="co">#&gt; add_gml_mids() IMPORTANT MESSAGE: By default, this function whittles</span></span>
<span><span class="co">#&gt; dispute-year data into dyad-year data by first selecting on unique onsets.</span></span>
<span><span class="co">#&gt; Thereafter, where duplicates remain, it whittles dispute-year data into</span></span>
<span><span class="co">#&gt; dyad-year data in the following order: 1) retaining highest `fatality`, 2)</span></span>
<span><span class="co">#&gt; retaining highest `hostlev`, 3) retaining highest estimated `mindur`, 4)</span></span>
<span><span class="co">#&gt; retaining highest estimated `maxdur`, 5) retaining reciprocated over</span></span>
<span><span class="co">#&gt; non-reciprocated observations, 6) retaining the observation with the lowest</span></span>
<span><span class="co">#&gt; start month, and, where duplicates still remained (and they don't), 7) forcibly</span></span>
<span><span class="co">#&gt; dropping all duplicates for observations that are otherwise very similar. See:</span></span>
<span><span class="co">#&gt; http://svmiller.com/peacesciencer/articles/coerce-dispute-year-dyad-year.html</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(year, dyad)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(year, dyad)`</span></span>
<span></span>
<span><span class="co"># Here's a snapshot of U.S-Cuba from 1980-89 for illustration sake.</span></span>
<span><span class="va">NDY</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ccode1</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">&amp;</span> <span class="va">ccode2</span> <span class="op">==</span> <span class="fl">40</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ccode1</span><span class="op">:</span><span class="va">year</span>, <span class="va">cowmidongoing</span>, <span class="va">gmlmidongoing</span>, <span class="va">cowmidspell</span><span class="op">:</span><span class="va">gmlmidspell</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&gt;=</span> <span class="fl">1980</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 37 × 7</span></span></span>
<span><span class="co">#&gt;    ccode1 ccode2  year cowmidongoing gmlmidongoing cowmidspell gmlmidspell</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>      2     40  <span style="text-decoration: underline;">1</span>980             0             0           0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>      2     40  <span style="text-decoration: underline;">1</span>981             1             1           1           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>      2     40  <span style="text-decoration: underline;">1</span>982             0             0           0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>      2     40  <span style="text-decoration: underline;">1</span>983             1             1           1           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>      2     40  <span style="text-decoration: underline;">1</span>984             0             0           0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>      2     40  <span style="text-decoration: underline;">1</span>985             0             0           1           1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>      2     40  <span style="text-decoration: underline;">1</span>986             0             1           2           2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>      2     40  <span style="text-decoration: underline;">1</span>987             1             1           3           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>      2     40  <span style="text-decoration: underline;">1</span>988             0             0           0           0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>      2     40  <span style="text-decoration: underline;">1</span>989             0             0           1           1</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 27 more rows</span></span></span></code></pre></div>
<p>You can do this with state-year data as well. For example, you can
compare how CoW and UCDP code civil wars differently since 1946. Do
note, however, that <a href="http://svmiller.com/peacesciencer/articles/state-systems.html">the
nature of different state systems used in these data sets</a> means
we’ll treat one as a master and merge other codes into it.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/create_stateyears.html">create_stateyears</a></span><span class="op">(</span>system <span class="op">=</span> <span class="st">'gw'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/between.html" class="external-link">between</a></span><span class="op">(</span><span class="va">year</span>, <span class="fl">1946</span>, <span class="fl">2019</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_ccode_to_gw.html">add_ccode_to_gw</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_ucdp_acd.html">add_ucdp_acd</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intrastate"</span>, only_wars <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_cow_wars.html">add_cow_wars</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"intra"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># select just a few things</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">gwcode</span>, <span class="va">ccode</span>, <span class="va">year</span>, <span class="va">statename</span>, <span class="va">ucdpongoing</span>, <span class="va">ucdponset</span>,</span>
<span>         <span class="va">cowintraongoing</span>, <span class="va">cowintraonset</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/add_peace_years.html">add_peace_years</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">gwcode</span><span class="op">:</span><span class="va">statename</span>, <span class="va">ucdpspell</span>, <span class="va">cowintraspell</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># India is illustrative of how the two differ.</span></span>
<span>  <span class="co"># UCDP has an intra-state conflict to the level of war early </span></span>
<span>  <span class="co">#  into its existence. CoW does not.</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gwcode</span> <span class="op">==</span> <span class="fl">750</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(year, ccode)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode, year)`</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 73 × 10</span></span></span>
<span><span class="co">#&gt;    gwcode ccode  year statename ucdpspell cowintraspell ucdpongoing ucdponset</span></span>
<span><span class="co">#&gt;     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>    750   750  <span style="text-decoration: underline;">1</span>947 India             0             0           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>    750   750  <span style="text-decoration: underline;">1</span>948 India             1             1           1         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>    750   750  <span style="text-decoration: underline;">1</span>949 India             0             2           1         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>    750   750  <span style="text-decoration: underline;">1</span>950 India             0             3           1         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>    750   750  <span style="text-decoration: underline;">1</span>951 India             0             4           1         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>    750   750  <span style="text-decoration: underline;">1</span>952 India             0             5           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>    750   750  <span style="text-decoration: underline;">1</span>953 India             1             6           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>    750   750  <span style="text-decoration: underline;">1</span>954 India             2             7           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>    750   750  <span style="text-decoration: underline;">1</span>955 India             3             8           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>    750   750  <span style="text-decoration: underline;">1</span>956 India             4             9           0         0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 63 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: cowintraongoing &lt;dbl&gt;, cowintraonset &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="measure-leader-tenure-in-days">Measure Leader Tenure in Days<a class="anchor" aria-label="anchor" href="#measure-leader-tenure-in-days"></a>
</h2>
<p><code><a href="../reference/create_leaderyears.html">create_leaderyears()</a></code>, by default, returns an estimate of
leader-tenure as the unique calendar year for the leader. I think of
this is a reasonable thing to include, and benchmarking to years is
doing some internal lifting elsewhere in the function that generates
leader-year data from leader-day data in Archigos. However, it can lead
some peculiar observations that may not square with how we knee-jerk
think about leader tenure.</p>
<p>I will illustrate what I mean by this with the case of Jimmy Carter
from leader-year data standardized to Correlates of War state system
membership.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leader_years</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_leaderyears.html">create_leaderyears</a></span><span class="op">(</span>standardize <span class="op">=</span> <span class="st">'cow'</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(gwcode, year)`</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(ccode, date)`</span></span>
<span></span>
<span><span class="va">leader_years</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">obsid</span> <span class="op">==</span> <span class="st">"USA-1977"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 7</span></span></span>
<span><span class="co">#&gt;   obsid    leader ccode gender leaderage  year yrinoffice</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> USA-1977 Carter     2 M             53  <span style="text-decoration: underline;">1</span>977          1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> USA-1977 Carter     2 M             54  <span style="text-decoration: underline;">1</span>978          2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> USA-1977 Carter     2 M             55  <span style="text-decoration: underline;">1</span>979          3</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> USA-1977 Carter     2 M             56  <span style="text-decoration: underline;">1</span>980          4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> USA-1977 Carter     2 M             57  <span style="text-decoration: underline;">1</span>981          5</span></span></code></pre></div>
<p>Jimmy Carter took office in January 1977 (year 1) and had a tenure
through 1978 (year 2), 1979 (year 3), 1980 (year 4), and exited office
in January 1981 (year 5). We know presidents in the American context
have four-year terms. This output suggests five years.</p>
<p>If this is that problematic for the research design, especially one
that may be interested in what happens to leader behavior after a
certain amount of time in office, a user can do something like generate
estimates of leader tenure in a given year to the day. Basically, once
the core leader-year are generated, the user can use the
<code><a href="../reference/create_leaderdays.html">create_leaderdays()</a></code> function and summarize leader tenure in
the year as the minimum number of days the leader was in office in the
year and the maximum number of days the leader was in office in the
year.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># don't standardize the leader-days for this use, just to be safe.</span></span>
<span><span class="fu"><a href="../reference/create_leaderdays.html">create_leaderdays</a></span><span class="op">(</span>standardize <span class="op">=</span> <span class="st">'none'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="co"># extract year from date</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># group by leader</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">obsid</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># count days in office, for leader tenure</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>daysinoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># group-by leader and year</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">obsid</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># how long was the minimum (maximum) days in office for the leader in the year?</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>min_daysoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">daysinoffice</span><span class="op">)</span>,</span>
<span>            max_dayoffice <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">daysinoffice</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">#practice safe group-by, and assign to object</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">leader_tenures</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'obsid'. You can override using the</span></span>
<span><span class="co">#&gt; `.groups` argument.</span></span>
<span></span>
<span><span class="co"># add this information to our data</span></span>
<span><span class="va">leader_years</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">leader_tenures</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">leader_years</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(obsid, year)`</span></span></code></pre></div>
<p>Here’s what this would look like in the case of Jimmy Carter.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">leader_years</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">obsid</span> <span class="op">==</span> <span class="st">"USA-1977"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 9</span></span></span>
<span><span class="co">#&gt;   obsid    leader ccode gender leaderage  year yrinoffice min_daysoffice</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> USA-1977 Carter     2 M             53  <span style="text-decoration: underline;">1</span>977          1              1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> USA-1977 Carter     2 M             54  <span style="text-decoration: underline;">1</span>978          2            347</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> USA-1977 Carter     2 M             55  <span style="text-decoration: underline;">1</span>979          3            712</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> USA-1977 Carter     2 M             56  <span style="text-decoration: underline;">1</span>980          4           <span style="text-decoration: underline;">1</span>077</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> USA-1977 Carter     2 M             57  <span style="text-decoration: underline;">1</span>981          5           <span style="text-decoration: underline;">1</span>443</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1 more variable: max_dayoffice &lt;int&gt;</span></span></span></code></pre></div>
<p>This measure might be more useful. Basically, Jimmy Carter was a new
leader in 1977 (<code>min_daysoffice = 1</code>). By 1978, he had almost
a year under his belt (i.e. Jan. 1, 1978 was his 347th day in office).
By time he left office in 1981, he had completed 1,462 days on the
job.</p>
<p><code><a href="../reference/create_leaderyears.html">create_leaderyears()</a></code> elects to not create this
information for the user. No matter, it does not take much effort for
the user to create it if this is the kind of information they
wanted.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
