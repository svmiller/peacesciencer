<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Add Alliance Treaty Obligations and Provisions (ATOP) alliance data to a dyad-year data frame — add_atop_alliance • peacesciencer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Add Alliance Treaty Obligations and Provisions (ATOP) alliance data to a dyad-year data frame — add_atop_alliance"><meta name="description" content="add_atop_alliance() allows you to add Alliance Treaty
Obligations and Provisions (ATOP) data to a (dyad-year, leader-dyad-year)
data frame."><meta property="og:description" content="add_atop_alliance() allows you to add Alliance Treaty
Obligations and Provisions (ATOP) data to a (dyad-year, leader-dyad-year)
data frame."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">peacesciencer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">What’s Included?</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bremer-example.html">Dyad-Year Example: A Basic Replication/Extension of Bremer (1992)</a></li>
    <li><a class="dropdown-item" href="../articles/coerce-dispute-year-dyad-year.html">How `{peacesciencer}` Coerces Dispute-Year Data into Dyad-Year Data</a></li>
    <li><a class="dropdown-item" href="../articles/democracy.html">Fixing Unnecessary Missingness in Democracy Scores in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/different-data-types.html">Create Different Kinds of Data in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/fearon-laitin-example.html">State-Year Example: A Basic Replication/Extension of Fearon and Laitin (2003)</a></li>
    <li><a class="dropdown-item" href="../articles/joins.html">A Discussion of Various Joins in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/parlor-tricks.html">Various Parlor Tricks in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/state-systems.html">A Discussion of the Two State Systems (CoW, G-W) in `{peacesciencer}`</a></li>
    <li><a class="dropdown-item" href="../articles/versions.html">`{peacesciencer}` Data Versions</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-manuscript" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Manuscript</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-manuscript"><li><a class="dropdown-item" href="../ms.html">HTML</a></li>
    <li><a class="dropdown-item" href="../ms.pdf">PDF</a></li>
    <li><a class="dropdown-item" href="../appendix.pdf">Appendix (PDF)</a></li>
    <li><a class="dropdown-item" href="../memo.pdf">(Peer Review) Memo (PDF)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/svmiller/peacesciencer/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Add Alliance Treaty Obligations and Provisions (ATOP) alliance data to a dyad-year data frame</h1>
      <small class="dont-index">Source: <a href="https://github.com/svmiller/peacesciencer/blob/HEAD/R/add_atop_alliance.R" class="external-link"><code>R/add_atop_alliance.R</code></a></small>
      <div class="d-none name"><code>add_atop_alliance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>add_atop_alliance()</code> allows you to add Alliance Treaty
Obligations and Provisions (ATOP) data to a (dyad-year, leader-dyad-year)
data frame.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">add_atop_alliance</span><span class="op">(</span><span class="va">data</span>, ndir <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame with appropriate <span class="pkg">peacesciencer</span> attributes</p></dd>


<dt id="arg-ndir">ndir<a class="anchor" aria-label="anchor" href="#arg-ndir"></a></dt>
<dd><p>logical, defaults to <code>TRUE</code>. This argument specifies the behavior
of function whether the dyad-year data in the <code>data</code> argument is non-directed.
See Details section for more.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>add_atop_alliance()</code> takes a (dyad-year, leader-dyad-year) data
frame and adds information about the alliance pledge in that given dyad-year
from the ATOP data. These include whether there was an alliance with a
defense pledge, an offense pledge, neutrality pledge, non-aggression pledge,
or pledge for consultation in time of crisis. It also includes a simple
indicator communicating whether there was an alliance of any kind whatsoever.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Data are from version 5.1 of ATOP.</p>
<p>This function will also work with leader-dyad-years, though users should be
careful with leader-level applications of alliance data. Alliance data are
primarily communicated yearly, making it possible—even likely—that at
least one leader-dyad in a given year is credited with an alliance that was
not active in the particular leader-dyad. The ATOP alliance data are not
communicated with time measurements more granular than the year, at least for
dyad-years. The alliance-level data provided by ATOP do have termination
dates, but I am unaware how well these start and termination dates coincide
with particular members joining after the fact or exiting early. The alliance
phase data appear to communicate that "phases" are understood as beginning or
ending when the underlying document is amended in such a way that it affects
one of their variable codings, but this may or may not be because of a
signatory joining after the fact or exiting early. More guidance will be
useful going forward, but use these data for leader-level analyses with that
in mind.</p>
<p>It's conceivable that the simple alliance dummy can be 1 but all the
provisions can be 0. See the section below for a case when this happens.</p><div class="section">
<h3 id="on-the-ndir-argument">On the <code>ndir</code> Argument<a class="anchor" aria-label="anchor" href="#on-the-ndir-argument"></a></h3>


<p>Consider this Belgium-France directed dyad-year from 1832 as illustrative of
what you'll want to consider in the <code>ndir</code> argument. This is an interesting
case where it's an alliance with Belgium making no pledge of any kind to
France. France, instead, is making a defensive pledge to Belgium.</p><table class="table table"><tr><td><strong>ccode1</strong></td><td><strong>ccode2</strong></td><td><strong>year</strong></td><td><strong>atop_defense</strong></td><td><strong>atop_offense</strong></td><td><strong>atop_neutral</strong></td><td><strong>atop_nonagg</strong></td><td><strong>atop_consul</strong></td></tr><tr><td>211</td><td>220</td><td>1832</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>220</td><td>211</td><td>1832</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0</td></tr></table><p>A lot of <span class="pkg">peacesciencer</span> functionality prior to version 1.2 had leaned on
collapsing directed dyad-year data to non-directed dyad-year data through
simple subsets of the data where <code>ccode2</code> is larger than <code>ccode1</code>. Here,
that is a questionable decision absent clarification from the user. In this
case, Belgium (211) has made no pledge to defend France (220), though France
has made a pledge to defend Belgium in the event of an attack.</p>
<p>If the data supplied in the <code>data</code> argument in this function are directed
dyad-years, there is no issue for merging. <code>add_atop_alliance()</code> performs a
quick assessment of whether there is any instance in which <code>ccode1</code> is greater
than <code>ccode2</code>. If there are such observations, the data are assumed to be
directed dyad-year and the merging proceeds without further consideration. If
there are no instances in which <code>ccode1</code> is greater than <code>ccode2</code>, the data
are assumed to be non-directed dyad-years and the behavior of this function
hinges on the logical condition supplied to the <code>ndir</code> argument. If <code>ndir</code> is
<code>TRUE</code> (default), the function assumes you are aware the data you have are
non-directed while the alliance data are directed. It will then summarize the
directed dyad-year data looking for the highest observed value in the
dyad-year in either direction. In the above illustration, it would mean that
the Belgium-France dyad would have a defense pledge in 1832 no matter how the
non-directed dyad is entered in the data. If <code>ndir</code> is <code>FALSE</code>, the function
performs a simple merge on matching dyad-year keys. In the above illustration,
it would mean a Belgium-France dyad in 1832 would have no defense pledge
because it was incidentally the case that the defense pledge that does appear
in that dyad is made by the state with the higher state code. Use this
argument with that in mind if your data are non-directed.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Leeds, Brett Ashley, Jeffrey M. Ritter, Sara McLaughlin Mitchell, and
Andrew G. Long. 2002. "Alliance Treaty Obligations and Provisions, 1815-1944."
<em>International Interactions</em> 28: 237-60.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Steven V. Miller</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># just call `library(tidyverse)` at the top of the your script</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cow_ddy</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">add_atop_alliance</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Joining with `by = join_by(ccode1, ccode2, year)`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2,214,930 × 9</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ccode1 ccode2  year atop_alliance atop_defense atop_offense atop_neutral</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>      2     20  <span style="text-decoration: underline;">1</span>920             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>      2     20  <span style="text-decoration: underline;">1</span>921             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>      2     20  <span style="text-decoration: underline;">1</span>922             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>      2     20  <span style="text-decoration: underline;">1</span>923             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>      2     20  <span style="text-decoration: underline;">1</span>924             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>      2     20  <span style="text-decoration: underline;">1</span>925             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>      2     20  <span style="text-decoration: underline;">1</span>926             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>      2     20  <span style="text-decoration: underline;">1</span>927             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>      2     20  <span style="text-decoration: underline;">1</span>928             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>      2     20  <span style="text-decoration: underline;">1</span>929             0            0            0            0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2,214,920 more rows</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 2 more variables: atop_nonagg &lt;dbl&gt;, atop_consul &lt;dbl&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steve Miller.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

